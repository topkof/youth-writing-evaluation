# 青少年写作质量评测体系

## 引言

本系统是一个面向小学阶段（1-6年级）青少年的写作质量智能评测系统，支持全部写作类型（记叙文、议论文、说明文、读后感、游记、书信、诗歌等），提供完整的评测报告，包括分数评级、各维度评分、改进建议和范文对比，帮助青少年提升写作能力。

## 词汇表

- **评测系统**：指本青少年写作质量评测软件系统
- **写作类型**：指用户提交评测的作文体裁类别
- **评分维度**：指评测作文质量所采用的评价指标类别
- **基准分**：指根据年级和写作类型设定的标准分数
- **评级**：指根据总分划分的质量等级（优秀、良好、合格、待提高）
- **范文**：指同一体裁的优秀作文样本
- **改进建议**：指针对作文不足之处提供的优化指导
- **往返验证**：指将解析后的数据重新序列化，验证与原始数据一致性的测试方法

## 需求

### 需求1：评分维度体系

**用户故事：** AS 小学语文教师，我想要一个科学的评分体系，以便客观评价学生的作文质量。

#### Acceptance Criteria

1. WHEN 教师或学生提交作文进行评测，评测系统 SHALL 采用五个核心评分维度进行评估。
2. THE 评测系统 SHALL 支持以下五个评分维度及对应分值：
   - 内容主题维度：分值范围 0-30 分，评估主题明确性、内容充实度、思想深度
   - 结构组织维度：分值范围 0-20 分，评估段落清晰度、逻辑连贯性、开头结尾质量
   - 语言表达维度：分值范围 0-25 分，评估用词准确性、句式丰富度、表达流畅性
   - 书写规范维度：分值范围 0-15 分，评估错别字数量、标点使用正确性、格式规范性
   - 创意特色维度：分值范围 0-10 分，评估独特视角、创新表达、个人风格
3. THE 评测系统 SHALL 保证五个维度的分值总和等于 100 分。
4. WHILE 用户选择具体年级（1-6年级），评测系统 SHALL 根据年级自动调整各维度权重比例。

### 需求2：年级差异化评分标准

**用户故事：** AS 家长，我希望系统能根据孩子的年级调整评分标准，以便得到符合孩子发展阶段的评价。

#### Acceptance Criteria

1. WHEN 用户选择年级（1-6年级），评测系统 SHALL 应用该年级的差异化评分标准。
2. THE 评测系统 SHALL 定义六个年级的评分权重配置：
   - 一年级：内容主题 25%，结构组织 15%，语言表达 30%，书写规范 25%，创意特色 5%
   - 二年级：内容主题 25%，结构组织 15%，语言表达 30%，书写规范 25%，创意特色 5%
   - 三年级：内容主题 25%，结构组织 20%，语言表达 25%，书写规范 20%，创意特色 10%
   - 四年级：内容主题 28%，结构组织 22%，语言表达 25%，书写规范 15%，创意特色 10%
   - 五年级：内容主题 30%，结构组织 22%，语言表达 23%，书写规范 15%，创意特色 10%
   - 六年级：内容主题 30%，结构组织 25%，语言表达 22%，书写规范 13%，创意特色 10%
3. THE 评测系统 SHALL 为每个年级定义具体的评分细则，包括各分值段的具体表现描述。
4. THE 评测系统 SHALL 确保低年级评分更侧重基础表达能力，高年级评分更侧重综合写作能力。

### 需求3：写作类型分类识别

**用户故事：** AS 学生，我希望系统能自动识别我写的作文类型，以便得到针对性的评价。

#### Acceptance Criteria

1. WHEN 用户提交作文，评测系统 SHALL 自动识别该作文的写作类型。
2. THE 评测系统 SHALL 支持以下七种写作类型的自动识别：
   - 记叙文：侧重记人叙事、事件描述
   - 议论文：侧重观点阐述、论证说理
   - 说明文：侧重事物介绍、知识讲解
   - 读后感：侧重书籍阅读后的感受与思考
   - 游记：侧重旅行见闻与感受描写
   - 书信：侧重书信格式与情感表达
   - 诗歌：侧重诗歌形式的文学创作
3. THE 评测系统 SHALL 使用自然语言处理技术识别写作类型，识别准确率达到 90% 以上。
4. THE 评测系统 SHALL 提供写作类型手动选择功能，允许用户修正系统识别结果。
5. IF 系统识别结果与用户选择不一致，评测系统 SHALL 采用用户选择的写作类型进行评测。

### 需求4：写作类型专项评分规则

**用户故事：** AS 语文教师，我希望系统能针对不同类型的作文采用不同的评价标准，使评价更加科学合理。

#### Acceptance Criteria

1. WHEN 评测系统识别或接收用户指定的写作类型，评测系统 SHALL 应用该类型的专项评分规则。
2. THE 评测系统 SHALL 为记叙文定义专项评分要点：
   - 记叙文六要素完整性（时间、地点、人物、起因、经过、结果）
   - 事件描写生动性
   - 人物刻画细腻度
   - 情感表达真挚性
3. THE 评测系统 SHALL 为议论文定义专项评分要点：
   - 论点明确性
   - 论据充分性
   - 论证逻辑性
   - 结论收束性
4. THE 评测系统 SHALL 为说明文定义专项评分要点：
   - 说明对象清晰度
   - 说明方法多样性
   - 说明顺序合理性
   - 语言准确性
5. THE 评测系统 SHALL 为读后感定义专项评分要点：
   - 书籍内容概述准确性
   - 感想观点独特性
   - 联系实际紧密性
   - 情感表达真实性
6. THE 评测系统 SHALL 为游记定义专项评分要点：
   - 景物描写生动性
   - 游览顺序条理性
   - 旅途感受丰富性
   - 地点特色突出性
7. THE 评测系统 SHALL 为书信定义专项评分要点：
   - 书信格式规范性
   - 问候语得体性
   - 正文内容条理性
   - 结尾祝福恰当性
8. THE 评测系统 SHALL 为诗歌定义专项评分要点：
   - 韵律节奏和谐性
   - 意象运用准确性
   - 情感表达浓郁性
   - 语言凝练性

### 需求5：总分计算与评级

**用户故事：** AS 家长，我希望孩子的作文能得到一个直观的分数和等级，让我能快速了解孩子的写作水平。

#### Acceptance Criteria

1. WHEN 完成五个维度的评分计算，评测系统 SHALL 将各维度得分相加得到总分。
2. THE 评测系统 SHALL 保证总分范围为 0-100 分。
3. THE 评测系统 SHALL 根据总分划分四个评级等级：
   - 优秀：总分 85-100 分
   - 良好：总分 70-84 分
   - 合格：总分 60-69 分
   - 待提高：总分 0-59 分
4. THE 评测系统 SHALL 为每个评级生成对应的评语：
   - 优秀：肯定优点，鼓励保持和突破
   - 良好：肯定进步，指出提升方向
   - 合格：指出不足，明确改进重点
   - 待提高：温和鼓励，提供具体建议
5. THE 评测系统 SHALL 同时显示各分值段的作文数量分布统计。

### 需求6：各维度详细评分报告

**用户故事：** AS 语文教师，我希望看到学生作文在各维度的具体得分情况，以便针对性地指导学生改进。

#### Acceptance Criteria

1. WHEN 生成评测报告，评测系统 SHALL 为每个评分维度提供详细的评分结果。
2. THE 评测系统 SHALL 为内容主题维度提供以下子项评分：
   - 主题明确性得分（0-10分）
   - 内容充实度得分（0-10分）
   - 思想深度得分（0-10分）
3. THE 评测系统 SHALL 为结构组织维度提供以下子项评分：
   - 段落清晰度得分（0-7分）
   - 逻辑连贯性得分（0-7分）
   - 开头结尾质量得分（0-6分）
4. THE 评测系统 SHALL 为语言表达维度提供以下子项评分：
   - 用词准确性得分（0-8分）
   - 句式丰富度得分（0-8分）
   - 表达流畅性得分（0-9分）
5. THE 评测系统 SHALL 为书写规范维度提供以下子项评分：
   - 错别字扣分（0-5分）
   - 标点使用得分（0-5分）
   - 格式规范得分（0-5分）
6. THE 评测系统 SHALL 为创意特色维度提供以下子项评分：
   - 独特视角得分（0-4分）
   - 创新表达得分（0-3分）
   - 个人风格得分（0-3分）
7. THE 评测系统 SHALL 为每个子项提供具体的得分理由说明。

### 需求7：智能改进建议生成

**用户故事：** AS 学生，我希望得到具体的改进建议，知道如何才能写得更好。

#### Acceptance Criteria

1. WHEN 评测系统完成评分，评测系统 SHALL 根据评分结果自动生成改进建议。
2. THE 评测系统 SHALL 为每个低分维度（得分率低于60%）生成至少两条具体改进建议。
3. THE 评测系统 SHALL 按照以下规则生成改进建议：
   - 错别字问题：标注错误字词，提供正确写法
   - 标点问题：指出错误使用，解释正确用法
   - 用词问题：建议替换词汇，说明替换理由
   - 句式问题：提供改写示例，对比优劣效果
   - 结构问题：指出不足段落，建议调整方案
   - 内容问题：说明空洞之处，建议充实方向
4. THE 评测系统 SHALL 提供分级改进建议：
   - 短期建议：可立即实施的修改意见
   - 中期建议：需要练习提升的能力方向
   - 长期建议：需要长期积累的素养培养
5. THE 评测系统 SHALL 为每个改进建议标注对应的维度归属。

### 需求8：范文对比功能

**用户故事：** AS 语文教师，我希望有优秀的范文作为参照，帮助学生理解什么是好的作文。

#### Acceptance Criteria

1. WHEN 生成评测报告，评测系统 SHALL 提供范文对比分析。
2. THE 评测系统 SHALL 为每种写作类型准备同年级适用的优秀范文库。
3. THE 评测系统 SHALL 范文库 SHALL 包含至少 20 篇各类型范文，覆盖各分值段。
4. THE 评测系统 SHALL 根据用户作文的写作类型和年级，从范文库中选取最相关的范文进行对比。
5. THE 评测系统 SHALL 从以下维度进行范文对比分析：
   - 主题深度对比
   - 结构布局对比
   - 语言表达对比
   - 亮点特色对比
6. THE 评测系统 SHALL 标注范文中值得学习的具体段落和句子。
7. THE 评测系统 SHALL 指出用户作文与范文的差距所在。

### 需求9：历史进步追踪

**用户故事：** AS 家长，我希望能看到孩子写作能力的进步曲线，激励孩子持续提高。

#### Acceptance Criteria

1. WHEN 用户提交多篇作文进行评测，评测系统 SHALL 记录并追踪评测历史。
2. THE 评测系统 SHALL 存储每篇作文的评测时间、写作类型、各维度得分和总分。
3. THE 评测系统 SHALL 生成进步曲线图表，展示：
   - 总分变化趋势
   - 各维度得分变化趋势
   - 评级分布变化
4. THE 评测系统 SHALL 计算并显示以下统计数据：
   - 平均分变化
   - 最高分和最低分
   - 进步幅度（与上次相比）
   - 薄弱维度改善情况
5. THE 评测系统 SHALL 支持按时间范围筛选历史记录（本周、本月、本学期、本学年）。

### 需求10：用户界面与交互

**用户故事：** AS 小学生，我希望操作界面简单易懂，能轻松完成作文评测。

#### Acceptance Criteria

1. WHEN 用户首次访问系统，评测系统 SHALL 提供简洁直观的操作引导。
2. THE 评测系统 SHALL 支持以下输入方式：
   - 文本框直接输入作文内容
   - 图片上传（支持拍照上传手写稿）
   - 文件上传（支持 .txt、.doc、.docx 格式）
3. THE 评测系统 SHALL 提供年级选择器，支持 1-6 年级快速选择。
4. THE 评测系统 SHALL 在评测过程中显示进度提示。
5. THE 评测系统 SHALL 评测完成后立即显示评测结果。
6. THE 评测系统 SHALL 支持评测报告的导出和分享功能。
7. THE 评测系统 SHALL 提供界面字号放大功能，适应不同视力需求。

### 需求11：评分解析器

**用户故事：** AS 语文教研员，我希望系统能对作文进行细致的语言分析，以便深入了解学生的语言运用能力。

#### Acceptance Criteria

1. WHEN 用户提交作文文本，评测系统 SHALL 使用评分解析器分析作文内容。
2. THE 评测系统 SHALL 实现以下解析功能：
   - 字数统计（总字数、去标点字数）
   - 句子数量统计
   - 段落数量统计
   - 平均句长计算
   - 词汇丰富度计算
   - 常用词频率分析
3. THE 评测系统 SHALL 实现错别字检测功能：
   - 对比常用字词库
   - 识别可能的错别字
   - 提供正确写法建议
4. THE 评测系统 SHALL 实现标点使用分析功能：
   - 统计标点使用频率
   - 识别标点使用错误
   - 评估标点使用丰富度
5. THE 评测系统 SHALL 实现语法结构分析功能：
   - 识别句子成分
   - 检测病句类型
   - 标注病句位置
6. THE 评测系统 SHALL 提供解析结果的数据导出功能。
7. THE 评测系统 SHALL 包含往返验证机制，确保解析结果准确无误。

### 需求12：评分可视化组件

**用户故事：** AS 家长，我希望通过直观的图表了解孩子作文的优缺点。

#### Acceptance Criteria

1. WHEN 生成评测报告，评测系统 SHALL 提供丰富的可视化图表。
2. THE 评测系统 SHALL 实现雷达图展示各维度得分分布。
3. THE 评测系统 SHALL 实现柱状图展示与上次评测的对比。
4. THE 评测系统 SHALL 实现折线图展示历史进步趋势。
5. THE 评测系统 SHALL 实现饼图展示评级分布比例。
6. THE 评测系统 SHALL 所有图表 SHALL 支持交互操作（悬停显示详情、点击查看详细）。
7. THE 评测系统 SHALL 所有图表 SHALL 支持导出为图片格式。

### 需求13：安全与隐私保护

**用户故事：** AS 家长，我希望孩子的作文和个人信息得到妥善保护。

#### Acceptance Criteria

1. WHEN 用户使用系统，评测系统 SHALL 保护用户数据安全和隐私。
2. THE 评测系统 SHALL 实现用户认证机制，防止未授权访问。
3. THE 评测系统 SHALL 对用户作文数据进行加密存储。
4. THE 评测系统 SHALL 不会将用户作文用于模型训练或其他用途。
5. THE 评测系统 SHALL 支持用户删除个人数据和历史记录。
6. THE 评测系统 SHALL 提供数据导出功能，允许用户备份个人数据。
7. THE 评测系统 SHALL 符合相关数据保护法规要求。

### 需求14：文档上传格式支持

**用户故事：** AS 教师，我希望支持多种文档格式上传，包括 doc、docx、md、txt，方便批量提交学生作文。

#### Acceptance Criteria

1. WHEN 用户上传作文文档，评测系统 SHALL 支持以下文件格式：
   - Microsoft Word 文档（.doc、.docx）
   - Markdown 文档（.md）
   - 纯文本文件（.txt）
   - ZIP 压缩包（.zip）
2. THE 评测系统 SHALL 对每种格式进行验证：
   - .doc/.docx：使用 python-docx 库解析
   - .md：使用 markdown 解析库解析
   - .txt：直接读取文本内容
   - .zip：解压后验证包含的文件格式
3. THE 评测系统 SHALL 限制单个文件大小不超过 10MB。
4. THE 评测系统 SHALL 对上传文件进行病毒扫描和安全检查。
5. THE 评测系统 SHALL 支持同时上传多个文件（批量上传）。
6. THE 评测系统 SHALL 限制单次批量上传文件数量不超过 100 个。
7. THE 评测系统 SHALL 保留原始文件的扩展名信息用于后续处理。

### 需求15：ZIP压缩包处理

**用户故事：** AS 教师，我希望上传一个包含所有学生作文的 ZIP 压缩包，系统自动解压并逐个处理。

#### Acceptance Criteria

1. WHEN 用户上传 ZIP 文件，评测系统 SHALL 执行以下处理流程：
   - 接收并临时保存 ZIP 文件
   - 验证 ZIP 文件完整性
   - 解压所有文件到临时目录
   - 验证解压后的文件格式
   - 处理完成后删除 ZIP 压缩包
2. THE 评测系统 SHALL 验证 ZIP 文件结构：
   - 检查文件总数不超过 100 个
   - 检查嵌套目录深度不超过 3 层
   - 检查解压后总大小不超过 500MB
3. THE 评测系统 SHALL 支持 ZIP 文件中包含子目录。
4. THE 评测系统 SHALL 记录解压日志，包括：
   - 成功解压的文件列表
   - 无法处理的文件及原因
   - 格式不支持的文件列表
5. THE 评测系统 SHALL 在解压完成后立即删除原始 ZIP 文件，不进行永久存储。
6. IF ZIP 文件损坏或无法解压，评测系统 SHALL 返回详细错误信息给用户。

### 需求16：阿里云OSS存储集成

**用户故事：** AS 管理员，我希望将所有上传的作文文档存储到阿里云 OSS 对象存储服务中，按年月日建立文件夹结构。

#### Acceptance Criteria

1. WHEN 用户上传作文文档，评测系统 SHALL 支持阿里云 OSS 作为存储后端。
2. THE 评测系统 SHALL 在 OSS 中按以下目录结构存储文件：
   ```
   oss://{bucket}/{user_id}/{year}/{month}/{day}/{essay_id}/{filename}
   ```
3. THE 评测系统 SHALL 支持以下 OSS 配置项：
   - AccessKey ID
   - AccessKey Secret
   - Bucket 名称
   - OSS 地域节点（Endpoint）
   - 自定义域名（可选）
4. THE 评测系统 SHALL 支持配置切换（本地存储 / OSS 存储）。
5. THE 评测系统 SHALL 使用 SDK（oss2）进行 OSS 操作。
6. THE 评测系统 SHALL 对存储在 OSS 的文件设置合理的访问权限。
7. THE 评测系统 SHALL 支持从 OSS 下载已存储的作文文档。
8. THE 评测系统 SHALL 提供 OSS 使用量统计和费用估算。

### 需求17：自定义奖项配置

**用户故事：** AS 比赛组织者，我希望自定义奖项名称和获奖数量，例如一等奖 1 名、二等奖 3 名、三等奖 5 名等。

#### Acceptance Criteria

1. WHEN 用户创建比赛或批量评测任务，评测系统 SHALL 支持自定义奖项配置。
2. THE 评测系统 SHALL 支持配置任意数量和名称的奖项：
   - 奖项名称：支持自定义文本（如"一等奖"、"特等奖"、"优秀奖"）
   - 奖项数量：每种奖项的获奖名额
   - 奖项图标：可选的自定义图标或 Emoji
3. THE 评测系统 SHALL 支持预设奖项模板：
   - 竞赛模板：特等奖 1 名、一等奖 3 名、二等奖 5 名、三等奖 10 名
   - 班级模板：一等奖 1 名、二等奖 3 名、三等奖 5 名
   - 鼓励模板：优秀奖 10 名、进步奖 15 名
4. THE 评测系统 SHALL 支持奖项排序，可调整各奖项的优先级。
5. THE 评测系统 SHALL 支持奖项描述，输入获奖说明或评语模板。

### 需求18：奖项分数自动约束机制

**用户故事：** AS 比赛评委，我希望系统能自动确保各奖项的分数严格按照设定标准，避免分数冲突。

#### Acceptance Criteria

1. WHEN 完成所有作文评分后，评测系统 SHALL 自动执行奖项分数约束检查。
2. THE 评测系统 SHALL 遵循以下分数约束规则：
   - 一等奖 1 名：取最高分 1 篇，其分数为 X，则其他作文分数必须 < X
   - 二等奖 N 名：取次高分 N 篇，其最低分数为 Y，则其他作文分数必须 < Y
   - 三等奖 M 名：取第三高分 M 篇，其最低分数为 Z，则其他作文分数必须 < Z
   - 后续奖项：以此类推
3. THE 评测系统 SHALL 实现分数约束算法：
   ```
   一等奖分数阈值 = 第1名分数
   二等奖分数阈值 = 第(1+N1)名分数（其中N1为一等奖数量）
   三等奖分数阈值 = 第(1+N1+N2)名分数
   ...
   ```
4. THE 评测系统 SHALL 在分数相同时按以下规则处理：
   - 同分作文并列获奖
   - 调整各奖项数量以容纳并列作文
   - 显示并列提示信息
5. THE 评测系统 SHALL 生成获奖名单预览，允许用户手动调整。
6. THE 评测系统 SHALL 处理边缘情况：
   - 作文数量少于奖项总数时，全部获奖
   - 作文数量等于奖项总数时，全部获奖
   - 出现并列导致超过预设奖项数量时，自动调整

### 需求19：大模型上下文限制处理

**用户故事：** AS 语文教师，我希望即使学生作文数量很多，系统也能完整阅读所有作文后进行评分，保证评分标准的一致性。

#### Acceptance Criteria

1. WHEN 需要评分的作文总字数超过大模型上下文限制，评测系统 SHALL 采取分批处理策略。
2. THE 评测系统 SHALL 实现以下上下文压缩和分批策略：
   - 作文摘要压缩：使用无损失压缩算法压缩作文文本
   - 分批评分策略：将作文分批处理，每批不超过上下文限制
   - 全局评分汇总：对所有批次结果进行综合评估
3. THE 评测系统 SHALL 采用分批评分流程：
   ```
   Step 1: 对每篇作文进行初步分析，生成结构化摘要
   Step 2: 将所有摘要组合，调用大模型进行横向对比评分
   Step 3: 对高分和低分作文进行二次验证
   Step 4: 生成最终评分结果
   ```
4. THE 评测系统 SHALL 实现以下压缩技术：
   - 去除冗余空白字符
   - 合并重复信息
   - 保留核心内容和特征
   - 标记压缩前后位置映射
5. THE 评测系统 SHALL 保持评分标准一致性：
   - 所有作文使用相同的评分提示词
   - 批量评分前先进行标准对齐
   - 支持指定评分标准的参考作文
6. THE 评测系统 SHALL 支持配置上下文阈值（默认 128K tokens）。
7. THE 评测系统 SHALL 预估 token 使用量，在接近限制时自动切换分批模式。
8. THE 评测系统 SHALL 显示处理进度，包括当前批次和剩余作文数量。

### 需求20：批量评测任务管理

**用户故事：** AS 教师，我希望创建一个批量评测任务，上传多篇作文后统一进行评测和奖项评选。

#### Acceptance Criteria

1. WHEN 用户创建批量评测任务，评测系统 SHALL 支持以下配置：
   - 任务名称
   - 所属年级
   - 写作类型
   - 奖项配置
   - 评分模型选择
2. THE 评测系统 SHALL 记录任务状态：
   - 待处理
   - 处理中
   - 已完成
   - 部分失败
   - 已失败
3. THE 评测系统 SHALL 提供任务进度展示：
   - 已处理作文数 / 总作文数
   - 预估剩余时间
   - 当前处理状态
4. THE 评测系统 SHALL 支持任务中断和恢复。
5. THE 评测系统 SHALL 提供批量任务的评测结果汇总：
   - 分数分布统计
   - 获奖名单
   - 各维度平均分
   - 薄弱维度分析
6. THE 评测系统 SHALL 支持导出评测结果为 Excel 或 CSV 格式。
7. THE 评测系统 SHALL 保留历史任务记录，支持查看和重新执行。

### 需求21：获奖证书生成

**用户故事：** AS 组织者，我希望为获奖学生生成精美的电子获奖证书。

#### Acceptance Criteria

1. WHEN 获奖名单确定后，评测系统 SHALL 支持生成电子获奖证书。
2. THE 评测系统 SHALL 支持以下证书模板：
   - 正式模板：适用于正式比赛
   - 鼓励模板：适用于班级评选
   - 进步模板：适用于进步之星
3. THE 评测系统 SHALL 证书包含以下信息：
   - 获奖学生姓名
   - 获奖奖项名称
   - 获奖作文标题
   - 获奖分数
   - 颁奖日期
   - 颁奖单位
   - 防伪验证码
4. THE 评测系统 SHALL 支持自定义证书内容：
   - 颁奖单位名称
   - 证书标题
   - 落款签名
   - 祝福语
5. THE 评测系统 SHALL 支持证书导出为 PDF 和图片格式。
6. THE 评测系统 SHALL 支持批量下载所有获奖证书。

