(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7837:function(e,s,t){Promise.resolve().then(t.bind(t,6569))},6569:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(7437),r=t(2265),l=t(7689),n=t(5863),i=t(7053),d=t(535),o=t(1994),c=t(3335);function m(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,c.m6)((0,o.W)(s))}let x=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,s)=>{let{className:t,variant:r,size:l,asChild:n=!1,...d}=e,o=n?i.g7:"button";return(0,a.jsx)(o,{className:m(x({variant:r,size:l,className:t})),ref:s,...d})});u.displayName="Button";let f=r.forwardRef((e,s)=>{let{className:t,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...l})});f.displayName="Input";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:m("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});h.displayName="Textarea";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});p.displayName="Card";let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:m("flex flex-col space-y-1.5 p-6",t),...r})});g.displayName="CardHeader";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:m("text-2xl font-semibold leading-none tracking-tight",t),...r})});j.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:m("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:m("p-6 pt-0",t),...r})});b.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:m("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var y=t(1635),N=t(875),v=t(2135),w=t(401);let _=y.fC;y.ZA;let k=y.B4,C=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(y.xz,{ref:s,className:m("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,a.jsx)(y.JO,{asChild:!0,children:(0,a.jsx)(N.Z,{className:"h-4 w-4 opacity-50"})})]})});C.displayName=y.xz.displayName;let R=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(y.u_,{ref:s,className:m("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})});R.displayName=y.u_.displayName;let S=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(y.$G,{ref:s,className:m("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})});S.displayName=y.$G.displayName;let z=r.forwardRef((e,s)=>{let{className:t,children:r,position:l="popper",...n}=e;return(0,a.jsx)(y.h_,{children:(0,a.jsxs)(y.VY,{ref:s,className:m("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,a.jsx)(R,{}),(0,a.jsx)(y.l_,{className:m("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(S,{})]})})});z.displayName=y.VY.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(y.__,{ref:s,className:m("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=y.__.displayName;let Z=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(y.ck,{ref:s,className:m("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(y.wU,{children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(y.eT,{children:r})]})});Z.displayName=y.ck.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(y.Z0,{ref:s,className:m("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=y.Z0.displayName;let F=["一年级","二年级","三年级","四年级","五年级","六年级"];function B(e){let{onSubmit:s}=e,[t,i]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[c,m]=(0,r.useState)("三年级"),[x,y]=(0,r.useState)(!1),N=(0,r.useRef)(null),v=async()=>{if(d.trim()){y(!0);try{await s({title:t,content:d,grade:c})}finally{y(!1)}}};return(0,a.jsxs)(p,{className:"w-full max-w-4xl mx-auto",children:[(0,a.jsx)(g,{children:(0,a.jsx)(j,{className:"text-2xl font-bold",children:"作文评测"})}),(0,a.jsxs)(b,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"w-1/3",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"年级"}),(0,a.jsxs)(_,{value:c,onValueChange:m,children:[(0,a.jsx)(C,{className:"mt-1",children:(0,a.jsx)(k,{placeholder:"选择年级"})}),(0,a.jsx)(z,{children:F.map(e=>(0,a.jsx)(Z,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"w-2/3",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"标题（可选）"}),(0,a.jsx)(f,{placeholder:"请输入作文标题",value:t,onChange:e=>i(e.target.value),className:"mt-1"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"作文内容"}),(0,a.jsx)(h,{placeholder:"请输入或粘贴作文内容...",className:"min-h-[300px] font-medium text-base leading-relaxed mt-1",value:d,onChange:e=>o(e.target.value)})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center",children:[(0,a.jsx)(l.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"支持拖拽上传 .txt .doc .docx .md .zip"}),(0,a.jsx)("input",{type:"file",ref:N,className:"hidden",accept:".txt,.doc,.docx,.md,.zip",multiple:!0,onChange:e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(t){let e=new FileReader;e.onload=e=>{var s;o(null===(s=e.target)||void 0===s?void 0:s.result)},e.readAsText(t)}}}),(0,a.jsx)(u,{variant:"outline",className:"mt-4",onClick:()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.click()},children:"选择文件"})]}),(0,a.jsx)(u,{className:"w-full h-12 text-lg",onClick:v,disabled:x||!d.trim(),children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"评测中..."]}):"开始评测"})]})]})}var E=t(1505);let A=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(E.fC,{ref:s,className:m("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,a.jsx)(E.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});A.displayName=E.fC.displayName;let O={优秀:"text-green-500",良好:"text-blue-500",合格:"text-yellow-500",待提高:"text-red-500"};function T(e){let{totalScore:s,grade:t,dimensionScores:r,onViewDetails:l}=e,n=O[t]||"text-gray-500";return(0,a.jsx)(p,{className:"bg-gradient-to-br from-blue-50 to-indigo-50",children:(0,a.jsxs)(b,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"总分"}),(0,a.jsx)("p",{className:"text-7xl font-bold text-blue-600",children:s}),(0,a.jsx)("p",{className:"text-2xl font-medium ".concat(n),children:t})]}),(0,a.jsx)("div",{className:"flex-1 ml-8 space-y-3",children:r.map(e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-gray-500",children:[e.score,"/",e.maxScore]})]}),(0,a.jsx)(A,{value:e.score/e.maxScore*100,className:"h-2"})]},e.name))})]}),l&&(0,a.jsx)("button",{onClick:l,className:"w-full mt-6 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"查看详细分析"})]})})}var V=t(7625),I=t(5940),P=t(9366),$=t(3019),G=t(8646),H=t(4230);function K(e){let{data:s}=e;return(0,a.jsx)(V.h,{width:"100%",height:300,children:(0,a.jsxs)(I.H,{data:s,children:[(0,a.jsx)(P.n,{stroke:"#E2E8F0"}),(0,a.jsx)($.I,{dataKey:"subject",tick:{fill:"#64748B",fontSize:12}}),(0,a.jsx)(G.S,{angle:30,domain:[0,"auto"],tick:{fill:"#94A3B8",fontSize:10}}),(0,a.jsx)(H.F,{name:"得分",dataKey:"score",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.5})]})})}let U=t(3464).Z.create({baseURL:"/api",timeout:3e5});U.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));let Y={submit:e=>U.post("/essays/evaluate",e)};function D(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!1),n=async e=>{l(!0);try{let t=await Y.submit(e);s(t.data)}catch(e){console.error("评测失败:",e),alert("评测失败，请稍后重试")}finally{l(!1)}},i=e?[{name:"内容主题",score:e.dimensions.content_theme.score,maxScore:e.dimensions.content_theme.max_score,comment:e.dimensions.content_theme.comment},{name:"结构组织",score:e.dimensions.structure.score,maxScore:e.dimensions.structure.max_score,comment:e.dimensions.structure.comment},{name:"语言表达",score:e.dimensions.language.score,maxScore:e.dimensions.language.max_score,comment:e.dimensions.language.comment},{name:"书写规范",score:e.dimensions.writing_norm.score,maxScore:e.dimensions.writing_norm.max_score,comment:e.dimensions.writing_norm.comment},{name:"创意特色",score:e.dimensions.creativity.score,maxScore:e.dimensions.creativity.max_score,comment:e.dimensions.creativity.comment}]:[],d=i.map(e=>({subject:e.name,score:e.score,fullMark:e.maxScore}));return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4",children:(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"青少年写作质量评测系统"})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 px-4",children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsx)("div",{children:(0,a.jsx)(B,{onSubmit:n})}),e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(T,{totalScore:e.total_score,grade:e.grade,dimensionScores:i}),(0,a.jsxs)(p,{children:[(0,a.jsx)(g,{children:(0,a.jsx)(j,{children:"维度分析"})}),(0,a.jsx)(b,{children:(0,a.jsx)(K,{data:d})})]}),(0,a.jsxs)(p,{children:[(0,a.jsx)(g,{children:(0,a.jsx)(j,{children:"优点"})}),(0,a.jsx)(b,{children:(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:e.strengths.map((e,s)=>(0,a.jsx)("li",{children:e},s))})})]}),(0,a.jsxs)(p,{children:[(0,a.jsx)(g,{children:(0,a.jsx)(j,{children:"改进建议"})}),(0,a.jsx)(b,{children:(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:e.suggestions.map((e,s)=>(0,a.jsx)("li",{children:e},s))})})]})]})]})})]})}}},function(e){e.O(0,[608,971,117,744],function(){return e(e.s=7837)}),_N_E=e.O()}]);